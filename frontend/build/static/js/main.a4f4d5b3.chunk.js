(this["webpackJsonpdexters-coffee"]=this["webpackJsonpdexters-coffee"]||[]).push([[0],{22:function(e,t,n){"use strict";(function(e){var c=n(6),a=n.n(c),s=n(2),r=n(7),i=n(1),l=n(75),o=(n(39),n(4)),j=n.n(o),b=n(0);function u(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),c=0,a=e.length;c<a;c++)n[c]=e.charCodeAt(c);return t}function d(){return(d=Object(r.a)(a.a.mark((function e(t){var n,c,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"-----BEGIN PRIVATE KEY-----","-----END PRIVATE KEY-----",n=(n=t.replace("-----BEGIN PRIVATE KEY-----","").replace("-----END PRIVATE KEY-----","")).replace(/(\r\n|\n|\r)/gm,""),c=window.atob(n),s=u(c),e.next=8,window.crypto.subtle.importKey("pkcs8",s,{name:"RSASSA-PKCS1-v1_5",hash:"SHA-256"},!0,["sign"]);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t.a=function(){var t=Object(i.useState)(""),n=Object(s.a)(t,2),c=n[0],o=n[1],u=Object(i.useState)(""),h=Object(s.a)(u,2),m=h[0],O=h[1],f=Object(i.useState)(""),x=Object(s.a)(f,2),p=x[0],v=x[1],k=Object(i.useState)(!1),N=Object(s.a)(k,2),g=N[0],S=N[1],y=Object(i.useState)(""),E=Object(s.a)(y,2),w=E[0],A=E[1],C=Object(i.useState)(!1),T=Object(s.a)(C,2),B=T[0],_=T[1],K=function(e){o("name"==e.target.name?e.target.value:c),O("amount"==e.target.name?e.target.value:m),v("privateKey"==e.target.name?e.target.value:p)},P=function(){var e=Object(r.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),(n=new FileReader).onload=function(){var e=Object(r.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.result,v(n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.readAsText(t.target.files[0]);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsx)("div",{className:"payment-container",children:Object(b.jsxs)("form",{onSubmit:function(t){if(t.preventDefault(),!g)if(isNaN(m)||isNaN(parseFloat(m))||""==c.trim())alert("Invalid format");else{var n=Object(l.a)(),a={name:c,amount:m,tid:n};(function(e){return d.apply(this,arguments)})(p).then((function(t){S(!0);var s=JSON.stringify(a);console.log(s),window.crypto.subtle.sign({name:"RSASSA-PKCS1-v1_5"},t,e.from(s)).then((function(e){var t=btoa(String.fromCharCode.apply(null,new Uint8Array(e)));console.log("Final Signature:",t);var a={customer:c,tid:n,amount:m,message:s,signature:t};j.a.post("/api/addTransaction",a).then((function(e){console.log(e),o(""),O(0),S(!1),A(e.data.message),_(!e.data.error||!0)})).catch((function(e){console.log(e),S(!1),A("An error occurred"),_(!1)}))})).catch((function(e){alert("Error in reading private key file. Please make sure that the file is in the proper format.")}))})).catch((function(e){alert("Error in reading private key file. Please make sure that the file is in the proper format.")}))}},children:[Object(b.jsx)("h2",{children:"Add a Transaction"}),Object(b.jsx)("br",{}),Object(b.jsx)("div",{className:"payment-header",children:"CUSTOMER NAME"}),Object(b.jsx)("div",{className:"payment-input-container",children:Object(b.jsx)("input",{width:"pixels",className:"payment-input",value:c,onChange:K,name:"name"})}),Object(b.jsx)("br",{}),Object(b.jsx)("br",{}),Object(b.jsx)("div",{className:"payment-header",children:"AMOUNT"}),Object(b.jsx)("div",{className:"payment-input-container",children:Object(b.jsx)("input",{width:"pixels",className:"payment-input",value:m,onChange:K,name:"amount"})}),Object(b.jsx)("br",{}),Object(b.jsx)("br",{}),Object(b.jsx)("div",{className:"payment-header",children:"YOUR PRIVATE KEY"}),Object(b.jsx)("input",{type:"file",onChange:P}),Object(b.jsx)("br",{}),Object(b.jsx)("br",{}),Object(b.jsx)("br",{}),Object(b.jsx)("br",{}),Object(b.jsx)("div",{className:"payment-button-container",children:Object(b.jsx)("button",{className:"submit-button",type:"submit",children:g?"Submitting...":"Submit"})}),Object(b.jsx)("br",{}),Object(b.jsx)("div",{className:"status-indicator "+(B?"success":"failure"),children:g?"":w})]})})}}).call(this,n(33).Buffer)},28:function(e,t,n){},29:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},39:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},74:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),s=n(21),r=n.n(s),i=(n(28),n(2)),l=(n(29),n(0));var o=function(){return Object(l.jsx)("div",{className:"navbar-container",children:Object(l.jsx)("h2",{children:"Dexter's Coffee"})})};n(31),n(32);var j=function(e){var t=Object(c.useState)(0),n=Object(i.a)(t,2),a=n[0],s=n[1],r=function(e){return"selector-item "+(e==a?"selected":"")};return Object(l.jsxs)("div",{className:"selector-container",children:[Object(l.jsx)("div",{className:r(0),onClick:function(){s(0),e.setSelected(0)},children:"PAYMENT"}),Object(l.jsx)("div",{className:r(1),onClick:function(){s(1),e.setSelected(1)},children:"EXPLORER"})]})},b=n(22);n(59),n(60);var u=function(e){var t;return Object(l.jsxs)("div",{className:"block-container "+(e.selected?"selected":""),onClick:function(t){console.log("block clicked"),e.setSelected(e.index)},children:[Object(l.jsx)("div",{className:"title-header",children:0==e.block.block_height?"GENESIS BLOCK":"BLOCK"}),Object(l.jsx)("div",{className:"title",children:"Block #"+e.block.block_height}),Object(l.jsxs)("div",{className:"content",children:["Hash: ",Object(l.jsx)("span",{children:e.block.block_hash}),Object(l.jsx)("br",{})]}),Object(l.jsxs)("div",{className:"content",children:["Prev: ",Object(l.jsx)("span",{children:e.block.previous_block_hash||"N/A"}),Object(l.jsx)("br",{})]}),Object(l.jsxs)("div",{className:"content",children:["Merkle: ",Object(l.jsx)("span",{children:e.block.merkleRoot||"asdf"}),Object(l.jsx)("br",{})]}),Object(l.jsxs)("div",{className:"content",children:["Time: ",(t=e.block.timestamp,new Date(1e3*t).toLocaleString()),Object(l.jsx)("br",{})]})]})},d=n(4),h=n.n(d),m=n(23),O=n.n(m);n(73);var f=function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(0),r=Object(i.a)(s,2),o=r[0],j=r[1],b=Object(c.useState)([]),d=Object(i.a)(b,2),m=d[0],f=d[1],x=Object(c.useState)(!1),p=Object(i.a)(x,2),v=p[0],k=p[1],N=Object(c.useState)(!1),g=Object(i.a)(N,2),S=g[0],y=g[1];Object(c.useEffect)((function(){A()}),[n,o]),Object(c.useEffect)((function(){E()}),[]);var E=function(){h.a.get("/api/viewBlocks").then((function(e){console.log(e.data),a(e.data)})).catch((function(e){}))},w=function(e){return new Date(1e3*e).toLocaleString()},A=function(){null!=n[0]&&h.a.post("/api/viewTransactions",{block_hash:n[o].block_hash}).then((function(e){f(e.data)}))};return Object(l.jsxs)("div",{className:"explorer-container",children:[Object(l.jsxs)("div",{className:"verify-button-label",children:[Object(l.jsx)("h4",{onClick:function(e){e.preventDefault(),y(!0),h.a.get("/api/verifyBlocks").then((function(e){y(!1),e.data.error||alert("Success")})).catch((function(e){y(!1),alert("Error")}))},children:S?"Verifying...":"Verify Blockchain"}),Object(l.jsx)("h4",{onClick:function(e){v||(e.preventDefault(),k(!0),console.log("verify clicked"),h.a.get("/api/verifyTransaction").then((function(e){console.log(e),E(),k(!1)})).catch((function(e){console.log(e),k(!1)})))},children:v?"Creating...":"+ Create Block"})]}),Object(l.jsx)(O.a,{responsive:{superLargeDesktop:{breakpoint:{max:4e3,min:3e3},items:5},desktop:{breakpoint:{max:3e3,min:1024},items:3},tablet:{breakpoint:{max:1024,min:464},items:2},mobile:{breakpoint:{max:464,min:0},items:1}},containerClass:"main-blocks-container",children:n.map((function(e,t){return Object(l.jsx)("div",{className:"main-block-container",children:Object(l.jsx)(u,{block:e,selected:t==o,index:t,setSelected:j})})}))}),Object(l.jsx)("br",{}),Object(l.jsx)("br",{}),Object(l.jsxs)("div",{className:"main-block-content",children:[Object(l.jsx)("div",{className:"main-block-header",children:null==n[o]||0==n[o].block_height?"GENESIS BLOCK":"BLOCK"}),Object(l.jsx)("div",{className:"main-block-title",children:"Block #"+(null==n[o]?"1":n[o].block_height)}),Object(l.jsx)("br",{}),Object(l.jsx)("div",{className:"main-block-content-label height",children:"Height: "+(null==n[o]?"1":n[o].block_height)}),Object(l.jsx)("div",{className:"main-block-content-label hash",children:"Hash: "+(null==n[o]?"2":n[o].block_hash)}),Object(l.jsx)("div",{className:"main-block-content-label prev",children:"Previous Hash: "+(null==n[o]?"2":n[o].previous_block_hash)}),Object(l.jsx)("div",{className:"main-block-content-label time",children:"Time: "+(null==n[o]?"0":w(n[o].timestamp))}),Object(l.jsx)("br",{}),Object(l.jsx)("div",{className:"main-block-title",children:"Transactions"}),Object(l.jsxs)("table",{className:"main-block-transactions-table",children:[Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{children:"Transaction ID"}),Object(l.jsx)("th",{children:"Customer Name"}),Object(l.jsx)("th",{children:"Amount"}),Object(l.jsx)("th",{children:"Time"})]}),m.map((function(e){return Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:e.tid}),Object(l.jsx)("td",{children:e.customer}),Object(l.jsx)("td",{children:e.amount}),Object(l.jsx)("td",{children:w(e.timestamp)})]})}))]})]})]})};var x=function(){var e=Object(c.useState)(0),t=Object(i.a)(e,2),n=t[0],a=t[1];return Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)(o,{}),Object(l.jsx)(j,{setSelected:a}),0==n?Object(l.jsx)(b.a,{}):Object(l.jsx)(f,{})]})};r.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(x,{})}),document.getElementById("root"))}},[[74,1,2]]]);
//# sourceMappingURL=main.a4f4d5b3.chunk.js.map